{% extends 'base.html' %}

{% block content %}
  <h2>Welcome, {{ user.get_full_name }} !</h2>
  <p>Your email address: {{ user.email }}</p>
  <a href="{% url 'reset' %}">reset-password</a><br>
  <a href="{% url 'interests' %}">Interests</a><br>
  <a href="{% url 'upfile' %}">upfile</a><br>
  <a href="{% url 'search' %}">search</a><br>
  <a href="{% url 'community' %}">create community</a><br>
  <a href="{% url 'advertise' %}">advertise</a><br>
<h2>your uploads</h2>
{% for object in documents %}
    <div>
        <p>
        <img src="{{object.image.url}}" alt="" style="width:100px;height:100px;"><br>
        author: <a href="{% url 'author' pk=object.author %}">{{object.author}}</a><br>
        genre: <a href="{% url 'genre' pk=object.genre %}">{{object.genre}}</a><br>
        title: <a href="{% url 'bookpage' pk=object.pk %}">{{ object.title }}</a>
        delete this book : <a href="{% url 'delete' pk=object.pk %}">delete</a>
        </p>
    </div>
{% endfor %}
<h2>your ads</h2>
{% for object in ads %}
    <div>
        <p>
        <img src="{{object.image.url}}" alt="" style="width:100px;height:100px;"><br>
        author: <a href="{% url 'author' pk=object.author %}">{{object.author}}</a><br>
        genre: <a href="{% url 'genre' pk=object.genre %}">{{object.genre}}</a><br>
        title: <a href="{% url 'adpage' pk=object.pk %}">{{ object.title }}</a>
        delete this book : <a href="{% url 'deletead' pk=object.pk %}">delete ad</a>
        </p>
    </div>
{% endfor %}
<h2>read requests</h2>
{% for doc,li in rplist %}
  {% for l in li %}
  <a href="{% url 'bookpage' pk=doc.pk %}">{{ doc.title }}</a>
  {{l.username}}<a href="{% url 'acceptread' pk=l.pk pk1=doc.pk %}">accept</a>
  {% endfor %}
{% endfor %}
<h2>your interests</h2>
{% for i in interest.my_field %}
    <a href="{% url 'genre' pk=i %}">{{i}}</a>
        <br>
{% endfor %}
<h2>suggestions</h2>
{% for object in doc %}
    <li>
        <div>
          <p>
          <img src="{{object.image.url}}" alt="" style="width:100px;height:100px;"> <br>
          author: <a href="{% url 'author' pk=object.author %}">{{object.author}}</a><br>
          genre: <a href="{% url 'genre' pk=object.genre %}">{{object.genre}}</a> <br>
          title: <a href="{% url 'bookpage' pk=object.pk %}">{{ object.title }}</a><br>
          uploader: <a href="{% url 'uploader' pk=object.uploader %}">{{object.uploader}}</a>
          </p>
          rating: {{object.rate1}}
          no of ratings: {{objects.no_ratings}}<br> 
        </div>
    </li>
{% endfor %}
<h2>Notifications</h2>
{% for u in fl %}
    {{ u.get_full_name }}
{% endfor %}
<h2>owned communities</h2>
{% for c,count in opclist %}
    name: <a href="{% url 'cpage' pk=c.pk %}">{{ c.name }}</a>
    requests: {{count}}
{% endfor %}
<h2>joined communities</h2>
{% for c in jcom %}
    name: <a href="{% url 'cpage' pk=c.pk %}">{{ c.name }}</a>
    <a href="{% url 'leave' pk=c.pk %}">leave</a><br>
{% endfor %}
<h2>Other communities</h2>
{% for c,l in jpclist %}
    {% if not c in jcom %}
    name: {{ c.name }}
    {% if user in l %}
    <a href="{% url 'crequest' pk=c.pk %}">cancelrequest</a><br>
    {% else %}
    <a href="{% url 'srequest' pk=c.pk %}">join</a><br>
    {% endif %}
    description: {{c.description}}<br>
    {% endif %}
{% endfor %}

{% endblock %}